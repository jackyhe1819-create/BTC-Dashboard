<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BTC é•¿æœŸæŒ‡æ ‡ä»ªè¡¨ç›˜</title>
    <meta name="description" content="å®æ—¶ç›‘æ§æ¯”ç‰¹å¸é•¿æœŸæŒ‡æ ‡ï¼ŒåŒ…æ‹¬ Pi Cycle Topã€å‡åŠå‘¨æœŸã€Ahr999ã€å¹‚å¾‹èµ°å»Šç­‰æ ¸å¿ƒæŒ‡æ ‡">

    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">

    <!-- Favicon -->
    <link rel="icon"
        href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>â‚¿</text></svg>">

    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>

<body>
    <div class="container">
        <!-- Header -->
        <header class="header">
            <h1>â‚¿ BTC é•¿æœŸæŒ‡æ ‡ä»ªè¡¨ç›˜</h1>
            <p class="subtitle">åŸºäº P0/P1 æ ¸å¿ƒæŒ‡æ ‡çš„å¸‚åœºç›‘æ§ç³»ç»Ÿ</p>
            <p class="timestamp" id="timestamp">åŠ è½½ä¸­...</p>
        </header>

        <!-- Loading State -->
        <div id="loading" class="loading">
            <div class="loading-spinner"></div>
            <p class="loading-text">æ­£åœ¨è·å– BTC æ•°æ®...</p>
        </div>

        <!-- Main Content (hidden until data loads) -->
        <main id="mainContent" style="display: none;">
            <!-- Price Section -->
            <section class="price-section">
                <div class="btc-price" id="btcPrice">--</div>
                <p class="btc-label">Bitcoin å½“å‰ä»·æ ¼</p>
            </section>

            <!-- ä»·æ ¼èµ°åŠ¿å›¾ (New in V4.0) -->
            <div class="chart-section"
                style="margin: 20px 0; background: var(--card-bg); border-radius: 12px; padding: 15px; border: 1px solid var(--border-color);">
                <div class="section-title" style="margin-bottom: 10px;">æ¯”ç‰¹å¸ä»·æ ¼èµ°åŠ¿ (BTC/USDT)</div>
                <!-- TradingView Widget BEGIN -->
                <div class="tradingview-widget-container" style="height: 500px; width: 100%;">
                    <div id="tradingview_b1e2c" style="height: 100%; width: 100%;"></div>
                    <script type="text/javascript" src="https://s3.tradingview.com/tv.js"></script>
                    <script type="text/javascript">
                        new TradingView.widget(
                            {
                                "autosize": true,
                                "symbol": "BINANCE:BTCUSDT",
                                "interval": "D",
                                "timezone": "Etc/UTC",
                                "theme": "dark",
                                "style": "1",
                                "locale": "zh_CN",
                                "enable_publishing": false,
                                "allow_symbol_change": true,
                                "container_id": "tradingview_b1e2c"
                            }
                        );
                    </script>
                </div>
                <!-- TradingView Widget END -->
            </div>

            <!-- Score Gauge + Summary Table -->
            <section class="gauge-section">
                <div class="score-summary-container">
                    <!-- Left: Gauge -->
                    <div class="gauge-container">
                        <h2 class="gauge-title">ç»¼åˆè¯„åˆ†</h2>
                        <div class="gauge">
                            <div class="gauge-bg"></div>
                            <div class="gauge-needle" id="gaugeNeedle"></div>
                            <div class="gauge-center"></div>
                        </div>
                        <div class="gauge-labels">
                            <span>-1 (å–å‡º)</span>
                            <span>0</span>
                            <span>+1 (ä¹°å…¥)</span>
                        </div>
                        <div class="score-value" id="scoreValue">--</div>
                        <div class="recommendation yellow" id="recommendation">åŠ è½½ä¸­...</div>
                    </div>

                    <!-- Right: Summary Table -->
                    <div class="summary-table-container">
                        <h2 class="table-title">æŒ‡æ ‡æ€»è§ˆ</h2>
                        <table class="summary-table" id="summaryTable">
                            <thead>
                                <tr>
                                    <th>æŒ‡æ ‡</th>
                                    <th>æ•°å€¼</th>
                                    <th>ç»“è®º</th>
                                </tr>
                            </thead>
                            <tbody id="summaryTableBody">
                                <!-- Dynamically populated -->
                            </tbody>
                        </table>
                    </div>
                </div>
            </section>


            <!-- P0 Indicators -->
            <section class="indicators-section">
                <h2 class="section-title">
                    <span class="icon">ğŸ”´</span>
                    P0 æ ¸å¿ƒæŒ‡æ ‡
                </h2>
                <div class="indicators-grid" id="p0Indicators">
                    <!-- Dynamically populated -->
                </div>
            </section>

            <!-- P1 Indicators -->
            <div class="priority-section">
                <div class="section-title">P1 é‡è¦å‚è€ƒ (Important)</div>
                <div class="cards-container" id="p1Indicators">
                    <!-- ç”± JS åŠ¨æ€å¡«å…… -->
                </div>
            </div>



            <!-- P2 Indicators -->
            <div class="priority-section">
                <div class="section-title">P2 è¾…åŠ©è§‚å¯Ÿ (Optional)</div>
                <div class="cards-container" id="p2Indicators">
                    <!-- ç”± JS åŠ¨æ€å¡«å…… -->
                </div>
            </div>
        </main>
    </div>

    <!-- Refresh Button -->
    <button class="refresh-btn" id="refreshBtn" title="åˆ·æ–°æ•°æ®">ğŸ”„</button>

    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js"></script>
    <script src="{{ url_for('static', filename='script.js') }}"></script>
</body>

</html>